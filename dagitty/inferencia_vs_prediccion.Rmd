---
title: "R Notebook"
output: html_notebook
---

```{r}
library(tidyverse)
library(dagitty)
library(reticulate)
Sys.setenv(RETICULATE_PYTHON="")
reticulate::use_condaenv("ml-course-edix-2")
```

```{python}
import numpy as np
import statsmodels.api as sm
import pandas as pd
```


# Bifurcaci√≥n

```{r}
dag_fork <- dagitty('dag {
bb="0,0,1,1"
X [pos="0.3,0.2"]
Y [pos="0.5,0.2"]
Z [pos="0.4,0.15"]
Z -> X
Z -> Y
}')

plot(dag_fork)
```
`Z` es la causa tanto de `X` como de `Y`

```{python}
N = 1000
Z = np.random.normal(0, 1, N)
X = np.random.normal(Z, 1, N)
Y = np.random.normal(Z, 1, N)
```

lo que induce una 

```{python}
np.random.seed(2022)

fork_df = pd.DataFrame({'X':X, 'Y':Y, 'Z': Z})
fork_df.corr()
```

o, de otra forma:

```{python}
fork_lm = sm.OLS(fork_df['Y'], sm.add_constant(fork_df['X'])).fit()
print(fork_lm.summary())
```

